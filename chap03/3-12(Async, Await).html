<html>

  <head>
    <title>Async, Await</title>
  </head>

  <body>
    <!-- axios : 비동기 통신을 위한 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
    <script>
      var url = "https://78aeb894-7efa-4ce7-a6fe-5ef1b0f62dab.mock.pstmn.io/productList";

      //   function getData() {
      //     return new Promise((resolve, reject) => {
      //       axios.get(url)
      //         .then(function (response) {
      //           console.log(response.data);
      //           resolve(response.data);
      //              reject(response.data);
      //         });
      //     });
      //   }

      //   var total = 0;
      //   getData().then(function(data) {
      //     for (var item of data.products) {
      //       total += item.price;
      //     }
      //     console.log(total);
      //   });

      async function getData2() {
        return (await axios.get(url)).data
      }

      async function calculateSum() {
        var data = await getData2();
        console.log(data);

        var total = 0;
        for (var item of data.products) {
          total += item.price;
        }
        console.log(total);
      }
      calculateSum();
    </script>
  </body>

</html>